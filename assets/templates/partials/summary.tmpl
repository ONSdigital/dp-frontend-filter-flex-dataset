{{$lang := .Language}}
<section>
    <h2 class="ons-u-fw-b">{{ localise "Variable" $lang 4 }}</h2>
    <div class="ons-summary ons-summary--hub">
        <div class="ons-summary__group">
            <table class="ons-summary__items ons-u-mb-s">
                <thead class="ons-u-vh">
                    <tr>
                        <th>{{ localise "Variable" $lang 1 }}</th>
                        <th>{{ localise "Selection" $lang 1 }}</th>
                        <th>{{ localise "Change" $lang 1 }}
                            {{ localise "Selection" $lang 1 }}</th>
                    </tr>
                </thead>
                {{ range $i, $dim := .Dimensions }}
                    <tbody class="ons-summary__item">
                        <tr id="{{.ID}}" class="ons-summary__row ons-summary__row--has-values ons-grid--flex@xxs@s ons-grid--between@xxs@s{{ if eq $i 0 }} ons-u-bt{{ end }}{{ if last $i $.Dimensions }} ons-u-bb{{ end }}">
                            <td class="ons-summary__item-title ons-u-pt-s ons-u-pb-s ons-u-pr-m ons-u-order--1 ons-u-bb-no@xxs@s ons-u-flex--2@xxs@s">
                                <div class="ons-summary__item--text ons-u-fw-b">
                                    {{ if .IsAreaType }}
                                        {{- localise "AreaTypeDescription" $lang 1 -}}
                                    {{ else if .IsCoverage}}
                                        {{- localise "AreaTypeCoverageTitle" $lang 1 -}}
                                    {{ else }}
                                        {{- .Name -}}
                                    {{ end }}
                                </div>
                            </td>
                            <td class="ons-summary__values ons-u-pt-s ons-u-pb-s ons-u-pr-m ons-u-pl-no@xxs@s ons-u-order--3 ons-u-fw@xxs@s
                                    ons-u-pt-no@xxs@s ons-u-bb-no@xxs@s ons-u-d-b@xxs@s">
                                {{ $length := len .Options }}
                                {{ $strOptCount := intToString .OptionsCount }}
                                {{ $isTruncated := .IsTruncated }}
                                {{ if and (eq .IsAreaType false) (eq .IsCoverage false)  }}
                                    {{ localise "HasSelectedCategories" $lang 1 $strOptCount }}
                                    <div class="ons-u-mt-s ons-u-fs-s ons-list--container">
                                        <ul class="ons-list{{ if $isTruncated }}--truncated{{end}}{{ if or (gt $length 9) ($isTruncated) }} ons-u-mb-xs{{else}}
                                                ons-u-m-no{{end}}">
                                            {{ range $i, $opt := .Options }}
                                                <li class="ons-list__item{{ if $isTruncated }}--truncated{{end}} ons-u-mb-no">
                                                    {{ . }}
                                                </li>
                                            {{ end }}
                                        </ul>
                                        {{ if $isTruncated }}
                                            <a href="{{.TruncateLink}}">{{- localise "TruncateShowAll" $lang 1 $strOptCount -}}</a>
                                        {{ else if gt $length 9 }}
                                            <a href="{{.TruncateLink}}">{{- localise "TruncateShowFewer" $lang 1 -}}</a>
                                        {{ end }}
                                    </div>
                                {{ else }}
                                    {{ if or (.IsAreaType) (.IsDefaultCoverage) }}
                                        {{ if .IsDefaultCoverage }}
                                            {{- localise "AreaTypeDefaultCoverage" $lang 1 -}}
                                        {{ else if .IsAreaType }}
                                            {{- .Name }} ({{ .OptionsCount -}})
                                        {{ end }}
                                    {{ else }}
                                        {{ if .Options }}
                                            {{ if gt $length 1 }}
                                                <ul class="ons-list ons-u-mb-no">
                                                    {{ range $i, $opt := .Options }}
                                                        <li class="ons-list__item">{{- . -}}</li>
                                                    {{ end }}
                                                </ul>
                                            {{ else }}
                                                {{- index .Options 0 -}}
                                            {{ end }}
                                        {{ end }}
                                    {{ end }}
                                {{ end }}
                            </td>
                            <td class="ons-summary__actions ons-u-pt-s ons-u-pb-s ons-u-pl-no@xxs ons-u-ml-xs@xxs ons-u-order--2 ons-u-bb-no@xxs@s">
                                {{ if or (.IsAreaType) (.IsCoverage) }}
                                    <a href="{{ .URI }}" class="ons-summary__button">
                                        {{ localise "Change" $lang 1 }}
                                        <span class="ons-u-vh">
                                            {{ if .IsAreaType }}
                                                {{- localise "AreaTypeDescription" $lang 1 -}}
                                            {{ else }}
                                                {{- localise "AreaTypeCoverageTitle" $lang 1 -}}
                                            {{ end }}
                                        </span>
                                    </a>
                                {{ end }}
                            </td>
                        </tr>
                    </tbody>
                {{ end }}
            </table>
            {{ if .Collapsible.CollapsibleItems }}
                {{ template "partials/collapsible" . }}
            {{ end }}
        </div>
    </div>
</section>
